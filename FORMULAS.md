# äººå£æ¨¡æ‹Ÿå™¨ - å…¬å¼é€ŸæŸ¥è¡¨

## ğŸ“Š å¿«é€Ÿå‚è€ƒ

### äººå£ç³»ç»Ÿ

#### 1. å¹´é¾„å¢é•¿
```typescript
æ¯æœˆå¢é•¿ = 1/12 å² â‰ˆ 0.0833å²
newAge = oldAge + 1/12
```

#### 2. å¥åº·è¡°å‡
```typescript
if (age >= 80) health -= 1.0
else if (age >= 60) health -= 0.5
health = Math.max(0, health)
```

#### 3. æ­»äº¡ç‡
| å¹´é¾„ | å¥åº·å€¼ | æœˆæ­»äº¡ç‡ |
|------|--------|----------|
| <40å² | ä»»æ„ | 0.1% |
| 40-60å² | 100 | 0.5% |
| 40-60å² | 50 | 0.55% |
| 40-60å² | 0 | 0.6% |
| 60-80å² | 100 | 2% |
| 60-80å² | 50 | 2.25% |
| 60-80å² | 0 | 2.5% |
| â‰¥80å² | 100 | 5% |
| â‰¥80å² | 50 | 5.5% |
| â‰¥80å² | 0 | 6% |

```typescript
if (age < 40) rate = 0.001
else if (age < 60) rate = 0.005 + (100 - health) * 0.0001
else if (age < 80) rate = 0.02 + (100 - health) * 0.0005
else rate = 0.05 + (100 - health) * 0.001
```

#### 4. ç”Ÿè‚²ç‡
```typescript
æ¡ä»¶: å¥³æ€§ + 18-45å² + å·²å©š + å­å¥³<5
åŸºç¡€ç”Ÿè‚²ç‡ = 5%
å®é™…ç”Ÿè‚²ç‡ = 5% Ã— (1 + ç”Ÿè‚²æ”¿ç­–ä¿®æ­£)

é¢„æœŸ: 15-20å¯¹è‚²é¾„å¤«å¦‡ â†’ 0.75-1ä¸ªæ–°ç”Ÿå„¿/æœˆ
```

### èµ„æºç³»ç»Ÿ

#### 5. é£Ÿç‰©ç”Ÿäº§
```typescript
// åŸºç¡€äº§å‡º
å†œæ°‘: 8, å·¥äºº: 3

// å¹´é¾„æ•ˆç‡
18-30å²: Ã—1.2
31-50å²: Ã—1.0
51-60å²: Ã—0.8
å…¶ä»–: Ã—0.5

// å¥åº·æ•ˆç‡
>80: Ã—1.2
60-80: Ã—1.0
<60: Ã—0.7
<30: Ã—0.4

// æŠ€èƒ½æ•ˆç‡
æ•™è‚²â‰¥7: Ã—1.3
æ•™è‚²â‰¥5: Ã—1.1
æ•™è‚²<5: Ã—1.0

// å­£èŠ‚ä¿®æ­£
2-7æœˆ: Ã—1.2 (æ˜¥å¤)
8-1æœˆ: Ã—0.8 (ç§‹å†¬)

// åœŸåœ°é™åˆ¶
æœ€å¤§äº§å‡º = äººå£ Ã— 15
```

#### 6. é£Ÿç‰©æ¶ˆè€—
| å¹´é¾„ | æ¶ˆè€— |
|------|------|
| 0-6å² | 0.5 |
| 7-12å² | 0.7 |
| 13-18å² | 0.9 |
| 19-59å² | 1.0 (ä½“åŠ›åŠ³åŠ¨+0.1) |
| 60+å² | 0.8 |

#### 7. èµ„é‡‘æ”¶å…¥
```typescript
// ç¨æ”¶
19-60å²: 5
60+å²: 2

// èŒä¸šäº§å‡º
å·¥äºº: +15
ç§‘å­¦å®¶: +20
å†œæ°‘: +3
```

#### 8. èµ„é‡‘æ”¯å‡º
```typescript
åŸºç¡€è®¾æ–½: 5
æˆå¹´äºº(19+): +1
å¤±ä¸šè€…: +2 (æ•‘æµé‡‘)
```

### å¸¸é‡

#### æ¸¸æˆå¸¸é‡
```typescript
INITIAL_POPULATION = 50
INITIAL_AGE_MIN = 18
INITIAL_AGE_MAX = 50

INITIAL_FOOD = 200
INITIAL_MONEY = 1000

MONTHS_PER_YEAR = 12
```

#### ç”Ÿè‚²å¸¸é‡
```typescript
BASE_FERTILITY_RATE = 0.05 (5%)
MAX_CHILDREN_PER_FAMILY = 5
MIN_AGE_FOR_CHILDBEARING = 18
MAX_AGE_FOR_CHILDBEARING = 45
```

#### æ­»äº¡å¸¸é‡
```typescript
BASE_DEATH_RATE = 0.001 (0.1%)
ELDERLY_AGE = 60
```

## ğŸ® å¹³è¡¡å‚è€ƒ

### ç†æƒ³æ¯”ä¾‹ï¼ˆ50äººå£ï¼‰

#### èŒä¸šåˆ†å¸ƒ
```
å†œæ°‘: 20äºº (40%)
å·¥äºº: 15äºº (30%)
ç§‘å­¦å®¶: 5äºº (10%)
å¤±ä¸š: 10äºº (20%)
```

#### å¹´é¾„åˆ†å¸ƒ
```
0-18å²: 25%
19-60å²: 65%
60+å²: 10%
```

#### èµ„æºå¹³è¡¡ï¼ˆæ¯æœˆï¼‰
```
é£Ÿç‰©äº§å‡º: ~265 (æ˜¥å¤) / ~177 (ç§‹å†¬)
é£Ÿç‰©æ¶ˆè€—: ~47
å‡€å¢é•¿: +218 / +130

èµ„é‡‘æ”¶å…¥: ~620
èµ„é‡‘æ”¯å‡º: ~60
å‡€å¢é•¿: +560
```

## ğŸ”§ å¿«é€Ÿè°ƒæ•´

### æé«˜ç”Ÿè‚²ç‡
```typescript
// gameStore.ts - constants
BASE_FERTILITY_RATE = 0.05 â†’ 0.08 (5% â†’ 8%)

// æˆ–æ·»åŠ æ”¿ç­–
effects: { fertilityRate: 0.5 }  // +50%
```

### è°ƒæ•´é£Ÿç‰©äº§å‡º
```typescript
// GameEngine.ts - calculateFoodProduction
å†œæ°‘: 8 â†’ 10

// æˆ–è°ƒæ•´æ•ˆç‡ç³»æ•°
ageEfficiency = 1.2 â†’ 1.3
```

### è°ƒæ•´æ­»äº¡ç‡
```typescript
// constants/game.ts
BASE_DEATH_RATE = 0.001 â†’ 0.0005 (å‡åŠ)
```

## ğŸ“ å¼€å‘å¤‡å¿˜

### æ·»åŠ æ–°èµ„æº
1. å®šä¹‰åœ¨ `types.ts` - Resourcesæ¥å£
2. æ·»åŠ è®¡ç®—æ–¹æ³•åˆ° `GameEngine.ts`
3. æ›´æ–° `processResources()`

### æ·»åŠ æ–°æ”¿ç­–
1. å®šä¹‰åœ¨ `constants/policies.ts`
2. åœ¨ `GameEngine.ts` ä¸­åº”ç”¨æ•ˆæœ
3. UIè‡ªåŠ¨æ˜¾ç¤º

### æ·»åŠ æ–°äº‹ä»¶
1. å®šä¹‰åœ¨ `EventSystem.ts`
2. åœ¨ `GameEngine.onTick()` ä¸­æ£€æŸ¥è§¦å‘
3. è°ƒç”¨ `applyEvent()`

---

**å¿«é€ŸæŸ¥æ‰¾**ï¼š
- æ­»äº¡ç‡ï¼šæœç´¢ `calculateDeathRate`
- ç”Ÿè‚²ç‡ï¼šæœç´¢ `BASE_FERTILITY_RATE`
- é£Ÿç‰©ï¼šæœç´¢ `calculateFoodProduction`
- èµ„é‡‘ï¼šæœç´¢ `calculateMoneyIncome`
